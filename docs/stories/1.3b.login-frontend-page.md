# Story 1.3b: 登入頁面前端實作

## Status
Draft

## Story
**As a** 專案成員,
**I want** 一個使用者友善的登入頁面來輸入我的帳號密碼,
**so that** 我能夠安全地存取 PCM 平台

## Acceptance Criteria
1. 提供響應式登入頁面
2. 包含帳號密碼輸入表單
3. 表單驗證和錯誤訊息顯示
4. 整合 NextAuth.js 進行前端認證
5. 登入成功後導向專案選擇頁
6. 失敗時顯示適當的錯誤訊息

## Tasks / Subtasks
- [ ] 建立登入頁面結構 (AC: 1)
  - [ ] 建立 (auth)/login/page.tsx
  - [ ] 實作響應式佈局設計
  - [ ] 整合 shadcn/ui 元件
  - [ ] 套用 PCM 品牌風格
- [ ] 實作登入表單 (AC: 2, 3)
  - [ ] 建立帳號密碼輸入欄位
  - [ ] 實作表單驗證邏輯
  - [ ] 建立送出按鈕和載入狀態
  - [ ] 實作錯誤訊息顯示
- [ ] 整合認證功能 (AC: 4, 5, 6)
  - [ ] 整合 NextAuth.js signIn 功能
  - [ ] 實作登入狀態管理
  - [ ] 處理認證成功/失敗流程
  - [ ] 實作頁面重導向邏輯
- [ ] 建立登入頁面元件測試 (Testing)
  - [ ] 表單元件單元測試
  - [ ] 登入流程整合測試
  - [ ] 響應式設計測試

## Dev Notes

### Previous Story Insights
依賴 Story 1.1 的專案結構，可與 Story 1.3a (認證後端) 並行開發。在整合測試階段需要 1.3a 完成。

### UI 設計要求
[Source: architecture/architecture-frontend.md#元件範本]
遵循 React + TypeScript + shadcn/ui 的標準範本。

### 品牌風格
[Source: docs/prd/prd-ui-design.md#品牌形象]
- 主色調：專業、沉穩的綠色
- 整體風格與 shadcn/ui 元件庫的簡潔美學保持一致
- 採用乾淨、簡潔的卡片式佈局

### 路由結構
[Source: architecture/architecture-frontend.md#路由組織結構]
```
apps/web/src/app/
├── (auth)/             # 放置「不需」登入即可存取的頁面
│   └── login/
│       └── page.tsx
```

### 表單驗證要求
[Source: architecture/architecture-standards.md#前端安全性]
- 所有使用者輸入都必須在前端進行基本驗證
- 使用 React 的內建 XSS 防護
- 避免在前端儲存敏感資料

### shadcn/ui 元件使用
[Source: architecture/architecture-frontend.md#元件組織結構]
使用的 UI 元件：
- Card, CardHeader, CardTitle, CardContent (卡片佈局)
- Button (登入按鈕)
- Input (輸入欄位)
- Form (表單處理)
- Alert (錯誤訊息)

### NextAuth.js 前端整合
[Source: architecture/architecture-backend.md#認證與授權架構]
```typescript
import { signIn } from 'next-auth/react';

const handleSubmit = async (credentials) => {
  const result = await signIn('credentials', {
    username: credentials.username,
    password: credentials.password,
    redirect: false
  });
  
  if (result?.error) {
    // 處理錯誤
  } else {
    // 重導向到專案選擇頁
    router.push('/projects');
  }
};
```

### 響應式設計要求
[Source: docs/prd/prd-ui-design.md#目標裝置與平台]
響應式網站 (Web Responsive)，需良好支援桌面、平板與手機瀏覽器。

### 檔案位置
[Source: architecture/architecture-project-structure.md#統一專案結構]
- 登入頁面：`apps/web/src/app/(auth)/login/page.tsx`
- 登入元件：`apps/web/src/components/features/LoginForm.tsx`
- 共用型別：`packages/shared/types/auth.ts`

### 狀態管理
[Source: architecture/architecture-frontend.md#狀態管理架構]
- 表單狀態：使用 React useState
- 全域認證狀態：透過 NextAuth.js Session Provider

### 錯誤處理
建立統一的錯誤訊息顯示：
- 帳號或密碼錯誤
- 網路連線問題
- 伺服器錯誤
- 表單驗證錯誤

### Testing
[Source: architecture/architecture-standards.md#測試策略]
- **測試檔案位置**: apps/web/__tests__/components/features/ (元件測試)
- **測試標準**: React Testing Library 元件測試
- **測試框架**: Jest + React Testing Library
- **此故事的特定測試要求**:
  - 測試表單輸入和驗證
  - 測試登入流程 (mock signIn)
  - 測試錯誤狀態顯示
  - 測試響應式佈局

## Change Log
| Date | Version | Description | Author |
|------|---------|-------------|---------|
| 2025-09-09 | 1.0 | 初始故事建立，從原 1.3 拆分前端部分 | Bob (Scrum Master) |

## Dev Agent Record
_This section will be populated by the development agent during implementation_

### Agent Model Used
_To be filled by dev agent_

### Debug Log References
_To be filled by dev agent_

### Completion Notes List
_To be filled by dev agent_

### File List
_To be filled by dev agent_

## QA Results
_Results from QA Agent review will be populated here after implementation_