# Story 1.1: 專案初始化與 Docker 環境建置

## Status
Draft

## Story
**As a** 開發者,
**I want** 設定一個新的 Next.js Monorepo 專案並配置好 Docker,
**so that** 整個團隊能擁有一個一致的本地開發環境

## Acceptance Criteria
1. Monorepo 專案結構被建立
2. Next.js 應用程式被初始化
3. `docker-compose.yml` 建立並可成功啟動 Next.js 與 Oracle 服務
4. 基礎程式碼風格工具已配置

## Tasks / Subtasks
- [ ] 設定 Monorepo 專案結構 (AC: 1)
  - [ ] 建立根目錄 package.json 並配置 npm workspaces
  - [ ] 建立 apps/web/ 目錄結構
  - [ ] 建立 packages/shared/ 目錄結構
  - [ ] 建立 infrastructure/ 目錄
- [ ] 初始化 Next.js 應用程式 (AC: 2)
  - [ ] 在 apps/web/ 中執行 create-next-app 建立 Next.js 14.x 專案
  - [ ] 配置 TypeScript 5.x
  - [ ] 整合 shadcn/ui 元件庫
  - [ ] 設定 Tailwind CSS
- [ ] 建立 Docker 容器化環境 (AC: 3)
  - [ ] 建立 Dockerfile 使用 node:18-alpine 基底
  - [ ] 建立 docker-compose.yml 包含 Next.js 與 Oracle 服務
  - [ ] 配置環境變數範本 .env.example
  - [ ] 驗證 Docker 環境可成功啟動
- [ ] 配置開發工具 (AC: 4)
  - [ ] 設定 ESLint 程式碼檢查
  - [ ] 設定 Prettier 程式碼格式化
  - [ ] 配置 Jest 測試框架
  - [ ] 設定 TypeScript 型別檢查

## Dev Notes

### Previous Story Insights
這是第一個故事，沒有前一個故事的洞察。

### 技術堆疊要求
[Source: architecture/architecture-overview.md#技術堆疊]
- **前端框架**: Next.js 14.x
- **UI 元件庫**: shadcn/ui (Latest)
- **語言**: TypeScript 5.x
- **狀態管理**: React Context / Zustand 18.x / 4.x
- **資料庫**: Oracle (待確認版本)
- **認證**: NextAuth.js (Auth.js) 5.x
- **測試**: Jest / React Testing Library / Playwright (Latest)
- **部署**: Docker / Docker Compose (Latest)

### 專案結構規範
[Source: architecture/architecture-project-structure.md#統一專案結構]
```
/pcm-project/
├── apps/
│   └── web/                    # 核心 Next.js 應用程式 (含前後端)
│       ├── src/
│       │   ├── app/              # 頁面與 API 路由
│       │   ├── components/       # 前端 React 元件
│       │   ├── lib/              # 共用函式庫
│       │   ├── repositories/     # 後端倉儲層
│       │   ├── services/         # 業務邏輯服務層
│       │   └── stores/           # 前端狀態管理
│       ├── public/               # 靜態資源
│       ├── package.json
│       ├── next.config.js
│       ├── tailwind.config.js
│       └── tsconfig.json
├── packages/                   # 共享套件
│   └── shared/                 # 共享的 TypeScript 型別
├── infrastructure/             # 基礎設施設定
│   ├── docker-compose.yml
│   ├── Dockerfile
│   └── nginx.conf
├── scripts/                    # 工具腳本
├── docs/                       # 文件
├── .env.example
├── .gitignore
├── package.json                # Root package.json for monorepo
└── README.md
```

### 環境變數要求
[Source: architecture/architecture-project-structure.md#環境變數]
```env
# 資料庫設定
DATABASE_URL=oracle://username:password@localhost:1521/xe
DATABASE_SCHEMA=PCM

# NextAuth 設定
NEXTAUTH_URL=http://localhost:3000
NEXTAUTH_SECRET=your-secret-key

# 檔案上傳設定
UPLOAD_PATH=/app/uploads
MAX_FILE_SIZE=10485760
```

### Docker 配置規範
[Source: architecture/architecture-project-structure.md#Docker配置]
- 使用 node:18-alpine 作為基底映像
- 實作多階段建置 (multi-stage build)
- 包含 deps, builder, runner 階段
- 設定非 root 使用者 (nextjs:nodejs)
- 暴露 3000 埠

### 開發工具配置
[Source: architecture/architecture-project-structure.md#開發常用指令]
必須包含的 npm scripts:
- `npm run dev` - 啟動開發伺服器
- `npm run build` - 建置生產版本
- `npm run test` - 執行所有測試
- `npm run lint` - 程式碼檢查
- `npm run type-check` - TypeScript 型別檢查

### 編碼標準要求
[Source: architecture/architecture-standards.md#命名慣例]
- React 元件檔: 大駝峰 (PascalCase) - ProjectCard.tsx
- API 路由檔: route.ts
- 型別定義: 大駝峰 (PascalCase) - Project, UserRole
- Oracle 資料表: 全大寫蛇形 - PROJECTS, USER_ROLES

### 測試要求
[Source: architecture/architecture-standards.md#測試策略]
- 測試金字塔: 單元測試 (70%), 整合測試 (20%), 端對端測試 (10%)
- 測試框架: Jest + React Testing Library + Playwright
- 測試組織:
```
apps/web/
├── __tests__/              # 單元測試
├── tests/
│   ├── integration/        # API 整合測試
│   └── e2e/               # 端對端測試
```

### 啟動範本或既有專案
[Source: architecture/architecture-overview.md#啟動範本或既有專案]
專案是透過標準的 `create-next-app` 指令進行初始化，並在此基礎上整合 shadcn/ui。

### 架構模式
[Source: architecture/architecture-overview.md#架構模式]
- 無伺服器架構 (Serverless Architecture): 利用 Next.js API Routes 作為後端
- 元件化 UI (Component-Based UI): 透過可重複使用的 React 元件來建構介面
- 倉儲模式 (Repository Pattern): 在後端，分離業務邏輯與資料存取邏輯

### Testing
[Source: architecture/architecture-standards.md#測試策略]
- **測試檔案位置**: apps/web/__tests__/ (單元測試), apps/web/tests/ (整合與E2E測試)
- **測試標準**: 遵循測試金字塔原則，單元測試 70%，整合測試 20%，端對端測試 10%
- **測試框架**: Jest + React Testing Library (單元/元件測試), Playwright (端對端測試)
- **此故事的特定測試要求**: 設定基礎測試配置，確保 Jest 可以執行，建立範例測試檔案驗證設定正確

## Change Log
| Date | Version | Description | Author |
|------|---------|-------------|---------|
| 2025-09-09 | 1.0 | 初始故事建立 | Bob (Scrum Master) |

## Dev Agent Record
_This section will be populated by the development agent during implementation_

### Agent Model Used
_To be filled by dev agent_

### Debug Log References
_To be filled by dev agent_

### Completion Notes List
_To be filled by dev agent_

### File List
_To be filled by dev agent_

## QA Results
_Results from QA Agent review will be populated here after implementation_